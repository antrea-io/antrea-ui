{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:base",
    ":gitSignOff", // Add commit Sign-Off for renovate commits
  ],

  // Allow only certain package managers and implicitly disable all others
  enabledManagers: ["gomod", "github-actions", "npm"],

  // Monitored branches
  baseBranches: ["main"],
  prConcurrentLimit: 10,
  prHourlyLimit: 0,

  postUpdateOptions: ["gomodTidy"],

  // Don't separate major, minor and patch in different PRs
  separateMajorMinor: false,
  separateMinorPatch: false,

  labels: ["dependencies"],

  // Enabling security updates based on GitHub's Dependabot-style security alerts
  vulnerabilityAlerts: {
    enabled: true,
  },

  packageRules: [
    {
      matchManagers: ["npm"],
      addLabels: ["javascript"],
    },

    // Automerge npm non-major updates
    {
      matchManagers: ["npm"],
      matchUpdateTypes: ["minor", "patch"],
      matchCurrentVersion: "!/^0/", // exclude pre-1.0.0 versions
      automerge: true,
      automergeType: "pr",
    },

    {
      matchManagers: ["npm"],
      matchPackageNames: ["@types/node"],
      matchUpdateTypes: ["major"],
      enabled: false,
    },

    // Disable indirect go dependencies updates, resource: https://github.com/renovatebot/renovate/discussions/35225#discussioncomment-13666269
    {
      matchManagers: ["gomod"],
      matchDepTypes: ["indirect"],
      enabled: false,
    },

    {
      matchManagers: ["gomod"],
      addLabels: ["go"],
    },

    {
      matchManagers: ["gomod"],
      matchPackagePrefixes: ["k8s.io/"],
      matchUpdateTypes: ["major", "minor"],
      enabled: false, // only enable patch updates
    },

    {
      matchManagers: ["gomod"],
      matchPackagePrefixes: ["k8s.io/"],
      matchUpdateTypes: ["patch"],
      groupName: "k8s",
      groupSlug: "k8s",
    },

    {
      matchManagers: ["gomod"],
      matchPackagePrefixes: ["golang.org/x/"],
      groupName: "go",
      groupSlug: "go",
    },

    {
      matchManagers: ["github-actions"],
      addLabels: ["github_actions"],
    },
  ],
}
